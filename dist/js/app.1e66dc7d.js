(function(e){function n(n){for(var i,u,o=n[0],l=n[1],s=n[2],v=0,j=[];v<o.length;v++)u=o[v],Object.prototype.hasOwnProperty.call(c,u)&&c[u]&&j.push(c[u][0]),c[u]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);r&&r(n);while(j.length)j.shift()();return a.push.apply(a,s||[]),t()}function t(){for(var e,n=0;n<a.length;n++){for(var t=a[n],i=!0,o=1;o<t.length;o++){var l=t[o];0!==c[l]&&(i=!1)}i&&(a.splice(n--,1),e=u(u.s=t[0]))}return e}var i={},c={app:0},a=[];function u(n){if(i[n])return i[n].exports;var t=i[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,u),t.l=!0,t.exports}u.m=e,u.c=i,u.d=function(e,n,t){u.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,n){if(1&n&&(e=u(e)),8&n)return e;if(4&n&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(u.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)u.d(t,i,function(n){return e[n]}.bind(null,i));return t},u.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(n,"a",n),n},u.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},u.p="dist/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=n,o=o.slice();for(var s=0;s<o.length;s++)n(o[s]);var r=l;a.push([0,"chunk-vendors"]),t()})({0:function(e,n,t){e.exports=t("cd49")},"022a":function(e,n,t){},2092:function(e,n,t){"use strict";t("2876")},2876:function(e,n,t){},8076:function(e,n,t){},"9cdc":function(e,n,t){"use strict";t("022a")},cd49:function(e,n,t){"use strict";t.r(n);t("e260"),t("e6cf"),t("cca6"),t("a79d"),t("8076");var i=t("830f"),c=t("5c40");function a(e,n){var t=Object(c["s"])("mine-sweeping");return Object(c["q"])(),Object(c["e"])(t)}t("99af");var u=t("9ff4"),o={class:"mine-sweeping-window"},l={class:"mine-sweeping-menu"},s=Object(c["j"])("span",null,"游戏",-1),r=Object(c["j"])("span",null,"重新开始",-1),v=Object(c["j"])("div",{class:"mine-sweeping-menu-spacer"},null,-1),j=Object(c["j"])("span",null,"初级",-1),b=Object(c["j"])("span",null,"中级",-1),f=Object(c["j"])("span",null,"高级",-1),g=Object(c["j"])("span",null,"自定义",-1),p=Object(c["j"])("span",null,"帮助",-1),m=Object(c["j"])("div",{class:"mine-sweeping-menu-item"},[Object(c["j"])("span",null,"玩法介绍")],-1),O={class:"mine-sweeping-main"},d={class:"mine-sweeping-panel"},w={class:"mine-sweeping-clock"},h=Object(c["j"])("i",{class:"iconfont icon-clock"},null,-1),M=Object(c["j"])("div",{class:"mine-sweeping-face"},null,-1),k={class:"mine-sweeping-mine-count"},y=Object(c["j"])("i",{class:"iconfont icon-mine"},null,-1),F={class:"mine-sweeping-content"},x={key:0,class:"mine-sweeping-flag iconfont icon-flag2"},S={key:1,class:"mine-sweeping-mine iconfont icon-mine"},A={key:2},B={key:3},E={key:0,class:"mine-sweeping-setting"},C=Object(c["j"])("h3",null,[Object(c["j"])("i",{class:"iconfont icon-setting"}),Object(c["i"])("游戏设置")],-1),D=Object(c["j"])("span",null,"行数：",-1),T=Object(c["j"])("span",null,"列数：",-1),q=Object(c["j"])("span",null,"地雷数：",-1),L={style:{textAlign:"right"}};function N(e,n){var t=Object(c["t"])("click-outside");return Object(c["q"])(),Object(c["e"])("div",o,[Object(c["z"])(Object(c["j"])("div",l,[Object(c["j"])("div",{class:["mine-sweeping-menu-item",{"is-hover":"game"===e.active}],onClick:n[6]||(n[6]=function(n){return e.clickActive("game")}),onMouseenter:n[7]||(n[7]=function(n){return e.hoverActive("game")})},[s,Object(c["j"])("div",{class:["mine-sweeping-sub-menu",{"is-show":"game"===e.active}]},[Object(c["j"])("div",{class:"mine-sweeping-menu-item",onClick:n[1]||(n[1]=function(){return e.onRestart.apply(e,arguments)})},[r]),v,Object(c["j"])("div",{class:"mine-sweeping-menu-item",onClick:n[2]||(n[2]=function(){return e.onEasy.apply(e,arguments)})},[j]),Object(c["j"])("div",{class:"mine-sweeping-menu-item",onClick:n[3]||(n[3]=function(){return e.onMiddle.apply(e,arguments)})},[b]),Object(c["j"])("div",{class:"mine-sweeping-menu-item",onClick:n[4]||(n[4]=function(){return e.onHard.apply(e,arguments)})},[f]),Object(c["j"])("div",{class:"mine-sweeping-menu-item",onClick:n[5]||(n[5]=function(n){return e.showSetting=!0})},[g])],2)],34),Object(c["j"])("div",{class:["mine-sweeping-menu-item",{"is-hover":"help"===e.active}],onClick:n[8]||(n[8]=function(n){return e.clickActive("help")}),onMouseenter:n[9]||(n[9]=function(n){return e.hoverActive("help")})},[p,Object(c["j"])("div",{class:["mine-sweeping-sub-menu",{"is-show":"help"===e.active}]},[m],2)],34)],512),[[t,e.clearActive]]),Object(c["j"])("div",O,[Object(c["j"])("div",d,[Object(c["j"])("div",w,[h,Object(c["j"])("span",null,Object(u["G"])(Math.floor(e.stopwatchTiming/1e3))+"s",1)]),M,Object(c["j"])("span",null,Object(u["G"])(e.isWinner?"你赢了":e.isLoser?"你输啦":"游戏中"),1),Object(c["j"])("div",k,[y,Object(c["j"])("span",null,Object(u["G"])(e.settings.mines-e.mineFlagSize),1)])]),Object(c["j"])("div",F,[(Object(c["q"])(!0),Object(c["e"])(c["b"],null,Object(c["r"])(e.board,(function(t,i){return Object(c["q"])(),Object(c["e"])("div",{key:i,class:"mine-sweeping-rows"},[(Object(c["q"])(!0),Object(c["e"])(c["b"],null,Object(c["r"])(t,(function(t,a){return Object(c["q"])(),Object(c["e"])("span",{key:"".concat(i,"-").concat(a),class:["mine-sweeping-block",{"is-block":e.checkIsBlock(t,i,a),"is-dug-mine":e.isDugMine(t),"is-tap":e.tapBlock.has(e.getFlagKey(i,a)),"is-gameover":e.isGameOver}],onMousedown:function(n){return e.onMousedown(n,i,a)},onMouseup:function(n){return e.onMouseup(n,i,a)},onContextmenu:n[10]||(n[10]=function(){return e.onContextmenu.apply(e,arguments)})},[e.isWinner&&e.isMine(t)||!e.isLoser&&e.isMineFlag(e.getFlagKey(i,a))?(Object(c["q"])(),Object(c["e"])("i",x)):Object(c["f"])("",!0),e.isLoser&&e.isMine(t)?(Object(c["q"])(),Object(c["e"])("i",S)):Object(c["f"])("",!0),e.isGameOver&&e.isMine(t)||!e.isUnknownFlag(e.getFlagKey(i,a))?Object(c["f"])("",!0):(Object(c["q"])(),Object(c["e"])("i",A,"?")),e.isLoser&&!e.isMine(t)&&e.isMineFlag(e.getFlagKey(i,a))?(Object(c["q"])(),Object(c["e"])("i",B,"x")):Object(c["f"])("",!0),Object(c["j"])("span",null,Object(u["G"])(e.getBlockText(t)),1)],42,["onMousedown","onMouseup"])})),128))])})),128))])]),e.showSetting?(Object(c["q"])(),Object(c["e"])("div",E,[C,Object(c["j"])("form",{onSubmit:n[14]||(n[14]=Object(i["c"])((function(){}),["prevent"]))},[Object(c["j"])("div",null,[D,Object(c["z"])(Object(c["j"])("input",{"onUpdate:modelValue":n[11]||(n[11]=function(n){return e.settingModel.rows=n})},null,512),[[i["b"],e.settingModel.rows,void 0,{number:!0}]])]),Object(c["j"])("div",null,[T,Object(c["z"])(Object(c["j"])("input",{"onUpdate:modelValue":n[12]||(n[12]=function(n){return e.settingModel.cols=n})},null,512),[[i["b"],e.settingModel.cols,void 0,{number:!0}]])]),Object(c["j"])("div",null,[q,Object(c["z"])(Object(c["j"])("input",{"onUpdate:modelValue":n[13]||(n[13]=function(n){return e.settingModel.mines=n})},null,512),[[i["b"],e.settingModel.mines,void 0,{number:!0}]])])],32),Object(c["j"])("div",L,[Object(c["j"])("button",{onClick:n[15]||(n[15]=function(n){return e.showSetting=!1})},"取消"),Object(c["j"])("button",{onClick:n[16]||(n[16]=function(){return e.onSetting.apply(e,arguments)})},"确定")])])):Object(c["f"])("",!0)])}t("5377");var U,G,K,z=t("5530"),P=t("a1e9"),W=(t("cb29"),t("4160"),t("4ec9"),t("d3b7"),t("6062"),t("3ca3"),t("ddb0"),t("b85c")),_=t("3835"),R=t("ade3"),I=navigator.userAgent,V=/macintosh|mac os x/i.test(I),H=/windows|win32/i.test(I);function J(e,n,t){return n<0||n>=e.length||t<0||t>=e[0].length}function X(e,n,t,i){var c=e.length,a=e[0].length;while(i){var u=Math.floor(Math.random()*c*a),o=Math.floor(u/a),l=Math.max(0,u-1)%a;o!==n&&l!==t&&e[o][l]!==G.Mine&&(e[o][l]=G.Mine,i--)}}function Q(){var e=Object(P["h"])({cols:8,rows:8,mines:10});function n(n){n.mines&&(e.mines=n.mines),n.cols&&(e.cols=Math.max(6,Math.min(40,n.cols))),n.rows&&(e.rows=Math.max(6,Math.min(40,n.rows)))}return Object(c["y"])((function(){var n=e.rows*e.cols-(e.rows+e.cols-1);e.mines>n&&(e.mines=n)})),{settings:e,setSettings:n}}(function(e){e[e["Null"]=0]="Null",e[e["Mine"]=1]="Mine",e[e["Unknown"]=2]="Unknown"})(U||(U={})),function(e){e["Empty"]="E",e["Mine"]="M",e["Block"]="B",e["DugMine"]="X"}(G||(G={})),function(e){e[e["init"]=0]="init",e[e["playing"]=1]="playing",e[e["win"]=2]="win",e[e["lose"]=3]="lose"}(K||(K={}));var Y=[-1,0,1,0,1,-1,-1,1],Z=[0,-1,0,1,1,-1,1,-1],$=Object(P["i"])(new Set);function ee(e){var n=Object(P["i"])(K.init),t=Object(P["i"])([]),i=Object(P["i"])(new Map);function c(){n.value=K.init,i.value=new Map,t.value=new Array(e.rows);for(var c=e.rows-1;c>-1;--c)t.value[c]=new Array(e.cols).fill(G.Empty)}function a(n,t){return e.cols*n+t}function u(){return n.value===K.lose||n.value===K.win}function o(e){return/[0-9]/.test(e)}function l(){for(var e,c=t.value.length,u=t.value[0].length,l=(e={},Object(R["a"])(e,G.DugMine,0),Object(R["a"])(e,G.Empty,0),Object(R["a"])(e,G.Block,0),Object(R["a"])(e,G.Mine,0),e),s=0;s<c;++s)for(var r=0;r<u;++r){var v=t.value[s][r];if(v===G.Block||o(v)){var j=a(s,r);i.value.has(j)&&i.value.delete(j)}l[v]||(l[v]=0),l[v]++}l[G.DugMine]>0?n.value=K.lose:0===l[G.Empty]&&(n.value=K.win)}function s(e,n){var i=t.value[e][n];switch(i){case G.Mine:t.value[e][n]=G.DugMine;break;case G.Empty:for(var c=0,a=0;a<Y.length;++a){var u=e+Y[a],o=n+Z[a];J(t.value,u,o)||t.value[u][o]!==G.Mine||c++}if(c>0)t.value[e][n]="".concat(c);else{t.value[e][n]=G.Block;for(var l=0;l<Y.length;++l){var r=e+Y[l],v=n+Z[l];J(t.value,r,v)||t.value[r][v]!==G.Empty||s(r,v)}}break}}function r(c,u){var o=a(c,u);i.value.has(o)&&i.value.get(o)!==U.Null||(n.value===K.init&&X(t.value,c,u,e.mines),n.value=K.playing,s(c,u),l())}function v(e,n){var c=t.value[e][n];if(c===G.Empty||c===G.Mine){var u=a(e,n);if(i.value.has(u)){var o=(i.value.get(u)+1)%3;i.value.set(u,o)}else i.value.set(u,U.Mine)}}function j(e){e.preventDefault()}var b=0,f=-1;function g(e,n,c){if(!u())switch(b=e.buttons,f=a(n,c),1===b&&(V&&e.metaKey&&(b=3),H&&e.ctrlKey&&(b=3)),b){case 1:i.value.has(f)&&i.value.get(f)!==U.Null||$.value.add(a(n,c));break;case 3:if(o(t.value[n][c]))for(var l=0;l<Y.length;++l){var s=n+Y[l],r=c+Z[l],v=a(s,r);J(t.value,s,r)||t.value[s][r]!==G.Empty&&t.value[s][r]!==G.Mine||i.value.has(v)&&i.value.get(v)!==U.Null||$.value.add(v)}break}}function p(e,n,c){if(!J(t.value,n,c)&&!u()&&a(n,c)===f)switch(b){case 1:r(n,c);break;case 2:v(n,c);break;case 3:if(o(t.value[n][c])){for(var j=[],g=0,p=0;p<Y.length;++p){var m=n+Y[p],O=c+Z[p],d=a(m,O);J(t.value,m,O)||t.value[m][O]!==G.Empty&&t.value[m][O]!==G.Mine||(i.value.has(d)&&i.value.get(d)!==U.Null||j.push([m,O]),i.value.get(d)===U.Mine&&g++)}parseInt(t.value[n][c])===g&&(j.forEach((function(e){var n=Object(_["a"])(e,2),t=n[0],i=n[1];return s(t,i)})),l())}break}}return c(),{status:n,board:t,flags:i,tapBlock:$,getFlagKey:a,onRestart:c,onContextmenu:j,onMousedown:g,onMouseup:p}}function ne(e){var n,t=Object(P["i"])(0),i=Object(P["i"])(0);function a(){i.value=Date.now()-t.value,n=setTimeout(a,1e3)}function u(){clearTimeout(n)}return Object(c["y"])((function(){switch(e.value){case K.init:i.value=0,u();break;case K.playing:t.value=Date.now(),a();break;case K.lose:case K.win:u();break}})),{startTime:t,stopwatchTiming:i}}function te(e,n){var t=Object(c["d"])((function(){return e.value===K.lose})),i=Object(c["d"])((function(){return e.value===K.win})),a=Object(c["d"])((function(){return t.value||i.value}));function u(e){return e===G.DugMine}function o(e){return e===G.Mine||u(e)}function l(e){return e===G.Empty||o(e)}function s(e){return n.value.get(e)===U.Mine}function r(e){return!n.value.has(e)||n.value.get(e)===U.Null}function v(e){return n.value.get(e)===U.Unknown}function j(e){switch(e){case G.Mine:case G.DugMine:case G.Empty:case G.Block:return"";default:return e}}var b=Object(c["d"])((function(){var e,t=0,i=Object(W["a"])(n.value.keys());try{for(i.s();!(e=i.n()).done;){var c=e.value;n.value.get(c)===U.Mine&&t++}}catch(a){i.e(a)}finally{i.f()}return t}));return{getBlockText:j,isGameOver:a,isLoser:t,isWinner:i,isBlock:l,isMine:o,isDugMine:u,isMineFlag:s,isNullFlag:r,isUnknownFlag:v,mineFlagSize:b}}function ie(){var e=Object(P["i"])(""),n=Object(P["i"])(!1);function t(){n.value=!1,e.value=""}function i(i){n.value||(n.value=!0),e.value===i?t():e.value=i}function c(t){n.value&&(e.value=t)}return{active:e,clickActive:i,hoverActive:c,clearActive:t}}document.addEventListener("mouseup",(function(){$.value.clear()}));var ce=Object(c["k"])({name:"MineSweeping",setup:function(){var e=ie(),n=e.active,t=e.clickActive,i=e.hoverActive,a=e.clearActive,u=Q(),o=u.settings,l=u.setSettings,s=ee(o),r=s.board,v=s.flags,j=s.tapBlock,b=s.status,f=s.getFlagKey,g=s.onRestart,p=s.onContextmenu,m=s.onMousedown,O=s.onMouseup,d=ne(b),w=d.stopwatchTiming,h=te(b,v),M=h.getBlockText,k=h.isGameOver,y=h.isLoser,F=h.isWinner,x=h.isBlock,S=h.isMine,A=h.isDugMine,B=h.isMineFlag,E=h.isNullFlag,C=h.isUnknownFlag,D=h.mineFlagSize,T=Object(P["i"])(!1),q=Object(P["i"])(Object(z["a"])({},o));function L(){l(Object(z["a"])({},q.value)),g(),T.value=!1}function N(e,n,t){return y.value?!(!S(e)&&B(f(n,t)))&&(x(e)&&!S(e)):x(e)}function U(){l({rows:8,cols:8,mines:10}),g()}function G(){l({rows:16,cols:16,mines:40}),g()}function K(){l({rows:16,cols:30,mines:99}),g()}return Object(c["y"])((function(){T.value&&(q.value=Object(z["a"])({},o))})),{showSetting:T,settingModel:q,onSetting:L,active:n,clickActive:t,hoverActive:i,clearActive:a,board:r,flags:v,settings:o,stopwatchTiming:w,tapBlock:j,isGameOver:k,isLoser:y,isWinner:F,isMineFlag:B,isNullFlag:E,isUnknownFlag:C,isBlock:x,isMine:S,isDugMine:A,getFlagKey:f,getBlockText:M,mineFlagSize:D,onRestart:g,onContextmenu:p,onMousedown:m,onMouseup:O,checkIsBlock:N,onEasy:U,onMiddle:G,onHard:K}}});t("2092");ce.render=N;var ae=ce,ue=Object(c["k"])({name:"App",components:{MineSweeping:ae}});t("9cdc");ue.render=a;var oe,le=ue,se=(t("c975"),t("a434"),t("10d1"),[]),re=new WeakMap;document.addEventListener("mousedown",(function(e){return oe=e})),document.addEventListener("mouseup",(function(e){se.forEach((function(n){if(e.target&&oe.target&&!n.contains(e.target)&&!n.contains(oe.target)&&n!==e.target){var t=re.get(n);null===t||void 0===t||t.value()}}))}));var ve={mounted:function(e,n){se.push(e),re.set(e,n)},updated:function(e,n){re.set(e,n)},unmounted:function(e){se.splice(se.indexOf(e),1),re.delete(e)}},je=ve;Object(i["a"])(le).directive("click-outside",je).mount("#app")}});