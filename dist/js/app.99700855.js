(function(e){function n(n){for(var i,o,r=n[0],u=n[1],l=n[2],v=0,b=[];v<r.length;v++)o=r[v],Object.prototype.hasOwnProperty.call(c,o)&&c[o]&&b.push(c[o][0]),c[o]=0;for(i in u)Object.prototype.hasOwnProperty.call(u,i)&&(e[i]=u[i]);s&&s(n);while(b.length)b.shift()();return a.push.apply(a,l||[]),t()}function t(){for(var e,n=0;n<a.length;n++){for(var t=a[n],i=!0,r=1;r<t.length;r++){var u=t[r];0!==c[u]&&(i=!1)}i&&(a.splice(n--,1),e=o(o.s=t[0]))}return e}var i={},c={app:0},a=[];function o(n){if(i[n])return i[n].exports;var t=i[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,o),t.l=!0,t.exports}o.m=e,o.c=i,o.d=function(e,n,t){o.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,n){if(1&n&&(e=o(e)),8&n)return e;if(4&n&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(o.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)o.d(t,i,function(n){return e[n]}.bind(null,i));return t},o.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(n,"a",n),n},o.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},o.p="dist/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],u=r.push.bind(r);r.push=n,r=r.slice();for(var l=0;l<r.length;l++)n(r[l]);var s=u;a.push([0,"chunk-vendors"]),t()})({0:function(e,n,t){e.exports=t("cd49")},"022a":function(e,n,t){},2092:function(e,n,t){"use strict";t("2876")},2876:function(e,n,t){},"9cdc":function(e,n,t){"use strict";t("022a")},cd49:function(e,n,t){"use strict";t.r(n);t("e260"),t("e6cf"),t("cca6"),t("a79d");var i=t("830f"),c=t("5c40");function a(e,n){var t=Object(c["r"])("mine-sweeping");return Object(c["p"])(),Object(c["e"])(t)}t("99af"),t("5377");var o=t("9ff4"),r={class:"mine-sweeping-window"},u={class:"mine-sweeping-menu"},l=Object(c["i"])("span",null,"游戏",-1),s=Object(c["i"])("span",null,"重新开始",-1),v=Object(c["i"])("span",null,"设置",-1),b=Object(c["i"])("span",null,"游戏设置",-1),f={class:"mine-sweeping-main"},p={class:"mine-sweeping-panel"},g={class:"mine-sweeping-content"},O={key:0,class:"mine-sweeping-setting"},d=Object(c["i"])("h3",null,"游戏设置",-1),j=Object(c["i"])("span",null,"行数：",-1),m=Object(c["i"])("span",null,"列数：",-1),w=Object(c["i"])("span",null,"地雷数：",-1),h={style:{textAlign:"right"}};function M(e,n){var t=Object(c["s"])("click-outside");return Object(c["p"])(),Object(c["e"])("div",r,[Object(c["y"])(Object(c["i"])("div",u,[Object(c["i"])("div",{class:["mine-sweeping-menu-item",{"is-hover":"game"===e.active}],onClick:n[2]||(n[2]=function(n){return e.clickActive("game")}),onMouseenter:n[3]||(n[3]=function(n){return e.hoverActive("game")})},[l,Object(c["i"])("div",{class:["mine-sweeping-sub-menu",{"is-show":"game"===e.active}]},[Object(c["i"])("div",{class:"mine-sweeping-menu-item",onClick:n[1]||(n[1]=function(){return e.onRestart.apply(e,arguments)})},[s])],2)],34),Object(c["i"])("div",{class:["mine-sweeping-menu-item",{"is-hover":"setting"===e.active}],onClick:n[5]||(n[5]=function(n){return e.clickActive("setting")}),onMouseenter:n[6]||(n[6]=function(n){return e.hoverActive("setting")})},[v,Object(c["i"])("div",{class:["mine-sweeping-sub-menu",{"is-show":"setting"===e.active}]},[Object(c["i"])("div",{class:"mine-sweeping-menu-item",onClick:n[4]||(n[4]=function(n){return e.showSetting=!0})},[b])],2)],34)],512),[[t,e.clearActive]]),Object(c["i"])("div",f,[Object(c["i"])("div",p,[Object(c["i"])("span",null,"时间："+Object(o["G"])(Math.floor(e.stopwatchTiming/1e3))+"s",1),Object(c["i"])("span",null,Object(o["G"])(e.isWinner?"你赢了":e.isLoser?"你输啦":"游戏中"),1),Object(c["i"])("span",null,"地雷："+Object(o["G"])(e.settings.mines-e.flags.size),1)]),Object(c["i"])("div",g,[(Object(c["p"])(!0),Object(c["e"])(c["b"],null,Object(c["q"])(e.board,(function(n,t){return Object(c["p"])(),Object(c["e"])("div",{key:t,class:"mine-sweeping-rows"},[(Object(c["p"])(!0),Object(c["e"])(c["b"],null,Object(c["q"])(n,(function(n,i){return Object(c["p"])(),Object(c["e"])("span",{key:"".concat(t,"-").concat(i),class:["mine-sweeping-block",{"is-block":e.isBlock(n),"is-flag":e.isBlock(n)&&e.flags.has(e.getFlagKey(t,i)),"is-gameover":e.isGameOver,"is-mine":e.isGameOver&&e.isMine(n)}],onClick:function(n){return e.onMineSweeping(t,i)},onContextmenu:function(n){return e.onMarkFlag(n,t,i)}},Object(o["G"])(e.getBlockText(n)),43,["onClick","onContextmenu"])})),128))])})),128))])]),e.showSetting?(Object(c["p"])(),Object(c["e"])("div",O,[d,Object(c["i"])("form",{onSubmit:n[10]||(n[10]=Object(i["c"])((function(){}),["prevent"]))},[Object(c["i"])("div",null,[j,Object(c["y"])(Object(c["i"])("input",{"onUpdate:modelValue":n[7]||(n[7]=function(n){return e.settingModel.rows=n})},null,512),[[i["b"],e.settingModel.rows,void 0,{number:!0}]])]),Object(c["i"])("div",null,[m,Object(c["y"])(Object(c["i"])("input",{"onUpdate:modelValue":n[8]||(n[8]=function(n){return e.settingModel.cols=n})},null,512),[[i["b"],e.settingModel.cols,void 0,{number:!0}]])]),Object(c["i"])("div",null,[w,Object(c["y"])(Object(c["i"])("input",{"onUpdate:modelValue":n[9]||(n[9]=function(n){return e.settingModel.mines=n})},null,512),[[i["b"],e.settingModel.mines,void 0,{number:!0}]])])],32),Object(c["i"])("div",h,[Object(c["i"])("button",{onClick:n[11]||(n[11]=function(n){return e.showSetting=!1})},"取消"),Object(c["i"])("button",{onClick:n[12]||(n[12]=function(){return e.onSetting.apply(e,arguments)})},"确定")])])):Object(c["f"])("",!0)])}var k,y,S=t("5530"),x=t("a1e9"),A=(t("cb29"),t("d3b7"),t("6062"),t("3ca3"),t("ddb0"),t("ade3"));function B(e,n,t){return n<0||n>=e.length||t<0||t>=e[0].length}(function(e){e["Empty"]="E",e["Mine"]="M",e["Block"]="B",e["DugMine"]="X"})(k||(k={})),function(e){e[e["init"]=0]="init",e[e["playing"]=1]="playing",e[e["win"]=2]="win",e[e["lose"]=3]="lose"}(y||(y={}));var E=[-1,0,1,0,1,-1,-1,1],T=[0,-1,0,1,1,-1,1,-1];function C(e,n,t){var i=e[n][t];switch(i){case k.Mine:e[n][t]=k.DugMine;break;case k.Empty:for(var c=0,a=0;a<E.length;++a){var o=n+E[a],r=t+T[a];B(e,o,r)||e[o][r]!==k.Mine||c++}if(c>0)e[n][t]="".concat(c);else{e[n][t]=k.Block;for(var u=0;u<E.length;++u){var l=n+E[u],s=t+T[u];B(e,l,s)||e[l][s]!==k.Empty||C(e,l,s)}}break}}function G(e,n,t,i){var c=e.length,a=e[0].length;while(i){var o=Math.floor(Math.random()*c*a),r=Math.floor(o/a),u=Math.max(0,o-1)%a;r!==n&&u!==t&&e[r][u]!==k.Mine&&(e[r][u]=k.Mine,i--)}}function D(){var e=Object(x["h"])({cols:6,rows:7,mines:4});function n(n){n.mines&&(e.mines=n.mines),n.cols&&(e.cols=Math.max(6,Math.min(40,n.cols))),n.rows&&(e.rows=Math.max(6,Math.min(40,n.rows)))}return Object(c["x"])((function(){var n=e.rows*e.cols-(e.rows+e.cols-1);e.mines>n&&(e.mines=n)})),{settings:e,setSettings:n}}function F(e){var n=Object(x["i"])(y.init),t=Object(x["i"])([]),i=Object(x["i"])(new Set);function a(){n.value=y.init,i.value=new Set,t.value=new Array(e.rows);for(var c=e.rows-1;c>-1;--c)t.value[c]=new Array(e.cols).fill(k.Empty)}function o(n,t){return e.cols*n+t}function r(){return n.value===y.lose||n.value===y.win}function u(){for(var e,c=t.value.length,a=t.value[0].length,r=(e={},Object(A["a"])(e,k.DugMine,0),Object(A["a"])(e,k.Empty,0),Object(A["a"])(e,k.Block,0),Object(A["a"])(e,k.Mine,0),e),u=0;u<c;++u)for(var l=0;l<a;++l){var s=t.value[u][l];if(s===k.Block||/[0-9]/.test(s)){var v=o(u,l);i.value.has(v)&&i.value.delete(v)}r[s]||(r[s]=0),r[s]++}r[k.DugMine]>0?n.value=y.lose:0===r[k.Empty]&&(n.value=y.win)}function l(i,c){B(t.value,i,c)||r()||(n.value===y.init&&G(t.value,i,c,e.mines),n.value=y.playing,C(t.value,i,c),u())}function s(e,n,c){if(!B(t.value,n,c)&&!r()){var a=t.value[n][c];if(a===k.Empty||a===k.Mine){e.preventDefault();var u=o(n,c);i.value.has(u)?i.value.delete(u):i.value.add(u)}}}var v,b=Object(x["i"])(0),f=Object(x["i"])(0);function p(){f.value=Date.now()-b.value,v=setTimeout(p,1e3)}function g(){clearTimeout(v)}return Object(c["x"])((function(){switch(n.value){case y.init:f.value=0,g();break;case y.playing:b.value=Date.now(),p();break;case y.lose:case y.win:g();break}})),{status:n,board:t,flags:i,stopwatchTiming:f,getFlagKey:o,onRestart:a,onMarkFlag:s,onMineSweeping:l}}function P(e){var n=Object(c["d"])((function(){return e.value===y.lose})),t=Object(c["d"])((function(){return e.value===y.win})),i=Object(c["d"])((function(){return n.value||t.value}));function a(e){return(!i.value||e!==k.Mine)&&(e===k.Empty||e===k.Mine)}function o(e){return e===k.Mine||e===k.DugMine}function r(e){return i.value&&e===k.Mine?k.Mine:e===k.Mine||e===k.Empty||e===k.Block?"":e}return{getBlockText:r,isGameOver:i,isLoser:n,isWinner:t,isBlock:a,isMine:o}}function L(){var e=Object(x["i"])(""),n=Object(x["i"])(!1);function t(){n.value=!1,e.value=""}function i(i){n.value||(n.value=!0),e.value===i?t():e.value=i}function c(t){n.value&&(e.value=t)}return{active:e,clickActive:i,hoverActive:c,clearActive:t}}var _=Object(c["j"])({name:"MineSweeping",setup:function(){var e=L(),n=e.active,t=e.clickActive,i=e.hoverActive,a=e.clearActive,o=D(),r=o.settings,u=o.setSettings,l=F(r),s=l.board,v=l.flags,b=l.status,f=l.stopwatchTiming,p=l.getFlagKey,g=l.onRestart,O=l.onMineSweeping,d=l.onMarkFlag,j=P(b),m=j.getBlockText,w=j.isGameOver,h=j.isLoser,M=j.isWinner,k=j.isBlock,y=j.isMine;g();var A=Object(x["i"])(!1),B=Object(x["i"])(Object(S["a"])({},r));function E(){u(Object(S["a"])({},B.value)),g(),A.value=!1}return Object(c["x"])((function(){A.value&&(B.value=Object(S["a"])({},r))})),{showSetting:A,settingModel:B,onSetting:E,active:n,clickActive:t,hoverActive:i,clearActive:a,board:s,flags:v,settings:r,stopwatchTiming:f,isGameOver:w,isLoser:h,isWinner:M,isBlock:k,isMine:y,getFlagKey:p,getBlockText:m,setSettings:u,onRestart:g,onMarkFlag:d,onMineSweeping:O}}});t("2092");_.render=M;var W=_,K=Object(c["j"])({name:"App",components:{MineSweeping:W}});t("9cdc");K.render=a;var R,U=K,V=(t("4160"),t("c975"),t("a434"),t("10d1"),[]),q=new WeakMap;document.addEventListener("mousedown",(function(e){return R=e})),document.addEventListener("mouseup",(function(e){V.forEach((function(n){if(e.target&&R.target&&!n.contains(e.target)&&!n.contains(R.target)&&n!==e.target){var t=q.get(n);null===t||void 0===t||t.value()}}))}));var J={mounted:function(e,n){V.push(e),q.set(e,n)},updated:function(e,n){q.set(e,n)},unmounted:function(e){V.splice(V.indexOf(e),1),q.delete(e)}},z=J;Object(i["a"])(U).directive("click-outside",z).mount("#app")}});